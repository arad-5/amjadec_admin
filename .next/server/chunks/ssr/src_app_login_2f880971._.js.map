{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/aradtaghikhani/Documents/projects/admin/src/app/login/components/SendOtpForm.jsx"],"sourcesContent":["import axios from '@/utils/axios'\nimport { Alert, Button, TextField, Typography } from '@mui/material'\n\nimport { useState } from 'react'\nimport EastIcon from '@mui/icons-material/East'\nimport { enqueueSnackbar } from 'notistack'\nimport axiosInstance from '@/utils/axios'\n\nconst SendOtpForm = ({ phone, setPhone, setError, setStep }) => {\n    const [loading, setLoading] = useState(false)\n    const handleSendOtp = async (e) => {\n        e.preventDefault()\n        try {\n            setLoading(true)\n            setError('')\n            await axiosInstance\n                .post(`/admin/auth/send-otp`, { phone })\n                .catch((err) => {\n                    console.error(err)\n                    throw new Error(\n                        err?.response?.data?.message || 'Failed to send OTP'\n                    )\n                })\n                .then((res) => console.log(res))\n\n            // If successful, move to step 2\n            setStep(2)\n        } catch (err) {\n            enqueueSnackbar({\n                variant: 'error',\n                message: err.message,\n            })\n        } finally {\n            setLoading(false)\n        }\n    }\n    return (\n        <div>\n            <form onSubmit={handleSendOtp} className=\"mb-4\">\n                <TextField\n                    label=\"شماره موبایل\"\n                    variant=\"filled\"\n                    fullWidth\n                    required\n                    value={phone}\n                    onChange={(e) => setPhone(e.target.value)}\n                    placeholder=\"مثل ۰۹۱۲۱۲۳۴۵۶۷\"\n                    className=\"!mb-3\"\n                />\n\n                <Button\n                    type=\"submit\"\n                    startIcon={<EastIcon />}\n                    loading={loading}\n                    loadingPosition=\"start\"\n                    variant=\"contained\"\n                    fullWidth\n                    size=\"large\"\n                >\n                    {loading ? 'در حال ارسال' : 'تایید'}\n                </Button>\n            </form>\n        </div>\n    )\n}\n\nexport default SendOtpForm\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAEA;AACA;AACA;;;;;;;;AAGA,MAAM,cAAc,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,gBAAgB,OAAO;QACzB,EAAE,cAAc;QAChB,IAAI;YACA,WAAW;YACX,SAAS;YACT,MAAM,qHAAA,CAAA,UAAa,CACd,IAAI,CAAC,CAAC,oBAAoB,CAAC,EAAE;gBAAE;YAAM,GACrC,KAAK,CAAC,CAAC;gBACJ,QAAQ,KAAK,CAAC;gBACd,MAAM,IAAI,MACN,KAAK,UAAU,MAAM,WAAW;YAExC,GACC,IAAI,CAAC,CAAC,MAAQ,QAAQ,GAAG,CAAC;YAE/B,gCAAgC;YAChC,QAAQ;QACZ,EAAE,OAAO,KAAK;YACV,CAAA,GAAA,6IAAA,CAAA,kBAAe,AAAD,EAAE;gBACZ,SAAS;gBACT,SAAS,IAAI,OAAO;YACxB;QACJ,SAAU;YACN,WAAW;QACf;IACJ;IACA,qBACI,8OAAC;kBACG,cAAA,8OAAC;YAAK,UAAU;YAAe,WAAU;;8BACrC,8OAAC,mMAAA,CAAA,YAAS;oBACN,OAAM;oBACN,SAAQ;oBACR,SAAS;oBACT,QAAQ;oBACR,OAAO;oBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oBACxC,aAAY;oBACZ,WAAU;;;;;;8BAGd,8OAAC,0LAAA,CAAA,SAAM;oBACH,MAAK;oBACL,yBAAW,8OAAC,yJAAA,CAAA,UAAQ;;;;;oBACpB,SAAS;oBACT,iBAAgB;oBAChB,SAAQ;oBACR,SAAS;oBACT,MAAK;8BAEJ,UAAU,iBAAiB;;;;;;;;;;;;;;;;;AAKhD;uCAEe","debugId":null}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///Users/aradtaghikhani/Documents/projects/admin/src/app/login/components/VerifyOtpForm.jsx"],"sourcesContent":["import axios from '@/utils/axios'\nimport { Button, TextField, Typography } from '@mui/material'\nimport { Box, Grid } from '@mui/system'\nimport React from 'react'\nimport { useState } from 'react'\nimport EastIcon from '@mui/icons-material/East'\nimport axiosInstance from '@/utils/axios'\n\nconst VerifyOtpForm = ({ phone, setError }) => {\n    const [loading, setLoading] = useState(false)\n    const [otp, setOtp] = useState(null)\n    const handleVerifyOtp = async (e) => {\n        e.preventDefault()\n        try {\n            setLoading(true)\n            setError('')\n            await axiosInstance\n                .post(\n                    `/admin/auth/verify-otp`,\n                    { phone, otp },\n                    {\n                        withCredentials: true,\n                    }\n                )\n                .catch((err) => {\n                    console.dir(err)\n                    throw new Error(\n                        err?.response?.data?.message || 'Failed to send OTP'\n                    )\n                })\n                .then((res) => {\n                    console.log(res)\n                    const {\n                        data: { token },\n                    } = res\n\n                    if (token) {\n                        localStorage.setItem('adminToken', token)\n\n                        // Cookies.set('admin-token', token, { expires: 1 })\n                        window.location.href = '/'\n                    } else {\n                        throw new Error('احراز هویت موفقیت آمیز نبود!')\n                    }\n                })\n        } catch (err) {\n            setError(err.message)\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    return (\n        <Box marginBottom={3}>\n            <form onSubmit={handleVerifyOtp}>\n                <Typography\n                    variant=\"body1\"\n                    gutterBottom\n                    align=\"center\"\n                    marginBottom={3}\n                >\n                    لطفا کد ارسال شده به شماره <strong>{phone}</strong> را وارد\n                    کنید{' '}\n                </Typography>\n\n                <TextField\n                    id=\"filled-basic\"\n                    label=\"کد ورود\"\n                    variant=\"filled\"\n                    fullWidth\n                    className=\"!mb-3\"\n                    value={otp || ''}\n                    type=\"number\"\n                    maxLength={6}\n                    onChange={(e) => setOtp(e.target.value)}\n                />\n\n                <Button\n                    type=\"submit\"\n                    startIcon={<EastIcon />}\n                    loading={loading}\n                    loadingPosition=\"start\"\n                    variant=\"contained\"\n                    fullWidth\n                    size=\"large\"\n                >\n                    {loading ? 'ارسال' : 'تایید'}\n                </Button>\n            </form>\n        </Box>\n    )\n}\n\nexport default VerifyOtpForm\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAEA;;;;;;;;;AAGA,MAAM,gBAAgB,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE;IACtC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,KAAK,OAAO,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/B,MAAM,kBAAkB,OAAO;QAC3B,EAAE,cAAc;QAChB,IAAI;YACA,WAAW;YACX,SAAS;YACT,MAAM,qHAAA,CAAA,UAAa,CACd,IAAI,CACD,CAAC,sBAAsB,CAAC,EACxB;gBAAE;gBAAO;YAAI,GACb;gBACI,iBAAiB;YACrB,GAEH,KAAK,CAAC,CAAC;gBACJ,QAAQ,GAAG,CAAC;gBACZ,MAAM,IAAI,MACN,KAAK,UAAU,MAAM,WAAW;YAExC,GACC,IAAI,CAAC,CAAC;gBACH,QAAQ,GAAG,CAAC;gBACZ,MAAM,EACF,MAAM,EAAE,KAAK,EAAE,EAClB,GAAG;gBAEJ,IAAI,OAAO;oBACP,aAAa,OAAO,CAAC,cAAc;oBAEnC,oDAAoD;oBACpD,OAAO,QAAQ,CAAC,IAAI,GAAG;gBAC3B,OAAO;oBACH,MAAM,IAAI,MAAM;gBACpB;YACJ;QACR,EAAE,OAAO,KAAK;YACV,SAAS,IAAI,OAAO;QACxB,SAAU;YACN,WAAW;QACf;IACJ;IAEA,qBACI,8OAAC,sLAAA,CAAA,MAAG;QAAC,cAAc;kBACf,cAAA,8OAAC;YAAK,UAAU;;8BACZ,8OAAC,sMAAA,CAAA,aAAU;oBACP,SAAQ;oBACR,YAAY;oBACZ,OAAM;oBACN,cAAc;;wBACjB;sCAC8B,8OAAC;sCAAQ;;;;;;wBAAe;wBAC9C;;;;;;;8BAGT,8OAAC,mMAAA,CAAA,YAAS;oBACN,IAAG;oBACH,OAAM;oBACN,SAAQ;oBACR,SAAS;oBACT,WAAU;oBACV,OAAO,OAAO;oBACd,MAAK;oBACL,WAAW;oBACX,UAAU,CAAC,IAAM,OAAO,EAAE,MAAM,CAAC,KAAK;;;;;;8BAG1C,8OAAC,0LAAA,CAAA,SAAM;oBACH,MAAK;oBACL,yBAAW,8OAAC,yJAAA,CAAA,UAAQ;;;;;oBACpB,SAAS;oBACT,iBAAgB;oBAChB,SAAQ;oBACR,SAAS;oBACT,MAAK;8BAEJ,UAAU,UAAU;;;;;;;;;;;;;;;;;AAKzC;uCAEe","debugId":null}},
    {"offset": {"line": 235, "column": 0}, "map": {"version":3,"sources":["file:///Users/aradtaghikhani/Documents/projects/admin/src/app/login/page.js"],"sourcesContent":["'use client'\n\nimport axios from '@/utils/axios'\nimport { useState } from 'react'\nimport SendOtpForm from './components/SendOtpForm'\nimport { Alert, Typography } from '@mui/material'\nimport VerifyOtpForm from './components/VerifyOtpForm'\nimport Logo from '@/components/Logo'\n\nexport default function AdminLoginPage() {\n    const [phone, setPhone] = useState('')\n    const [otp, setOtp] = useState('')\n    const [step, setStep] = useState(1) // 1 = phone step, 2 = OTP step\n    const [error, setError] = useState('')\n    const [loading, setLoading] = useState(false)\n\n    return (\n        <div className=\"w-full flex flex-col justify-center items-center px-6\">\n            <div className=\"max-w-96\">\n                <div className=\"w-full flex flex-col items-center\">\n                    <span className=\"text-sm -mb-3 block\">شهر الکترونیک</span>\n                    <Logo className=\"w-[80px] h-[80px]\" />\n                </div>\n                <Typography\n                    variant=\"h5\"\n                    component=\"h1\"\n                    fontWeight={'bold'}\n                    gutterBottom\n                    marginBottom={3}\n                >\n                    ورود\n                </Typography>\n                {step === 1 ? (\n                    <SendOtpForm\n                        phone={phone}\n                        setPhone={setPhone}\n                        error={error}\n                        setError={setError}\n                        setStep={setStep}\n                    />\n                ) : null}\n\n                {step === 2 ? (\n                    <VerifyOtpForm phone={phone} setError={setError} />\n                ) : null}\n\n                {error && <Alert severity=\"error\">{error}</Alert>}\n            </div>\n        </div>\n    )\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AAPA;;;;;;;;AASe,SAAS;IACpB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,KAAK,OAAO,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/B,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,GAAG,+BAA+B;;IACnE,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAK,WAAU;sCAAsB;;;;;;sCACtC,8OAAC,0HAAA,CAAA,UAAI;4BAAC,WAAU;;;;;;;;;;;;8BAEpB,8OAAC,sMAAA,CAAA,aAAU;oBACP,SAAQ;oBACR,WAAU;oBACV,YAAY;oBACZ,YAAY;oBACZ,cAAc;8BACjB;;;;;;gBAGA,SAAS,kBACN,8OAAC,iJAAA,CAAA,UAAW;oBACR,OAAO;oBACP,UAAU;oBACV,OAAO;oBACP,UAAU;oBACV,SAAS;;;;;2BAEb;gBAEH,SAAS,kBACN,8OAAC,mJAAA,CAAA,UAAa;oBAAC,OAAO;oBAAO,UAAU;;;;;2BACvC;gBAEH,uBAAS,8OAAC,uLAAA,CAAA,QAAK;oBAAC,UAAS;8BAAS;;;;;;;;;;;;;;;;;AAInD","debugId":null}}]
}